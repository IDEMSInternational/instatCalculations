---
output: github_document
---

<!-- README.md is generated from README.Rmd. Please edit that file -->

# instatCalculations

<!-- badges: start -->
[![R-CMD-check](https://github.com/IDEMSInternational/instatCalculations/workflows/R-CMD-check/badge.svg)](https://github.com/IDEMSInternational/instatCalculations/actions)
[![Codecov test coverage](https://codecov.io/gh/IDEMSInternational/instatCalculations/branch/main/graph/badge.svg)](https://app.codecov.io/gh/IDEMSInternational/instatCalculations?branch=main)
[![Lifecycle: stable](https://img.shields.io/badge/lifecycle-stable-green.svg)](https://lifecycle.r-lib.org/articles/stages.html#stable)
[![Project Status: WIP – Initial development is in progress, but there
has not yet been a stable, usable release suitable for the
public.](https://www.repostatus.org/badges/latest/wip.svg)](https://www.repostatus.org/#wip)
[![license](https://img.shields.io/badge/license-LGPL%20(%3E=%203)-lightgrey.svg)](https://www.gnu.org/licenses/lgpl-3.0.en.html)
<!-- badges: end -->

The `instatCalculations` package defines R6 classes and supporting functionality for the calculation system in R-Instat. It enables structured, modular, and reproducible workflows based on tidyverse-like logic but with full metadata integration and support for linked datasets.

## Installation

You can install the development version from GitHub:
```{r, eval = FALSE}
# install.packages("devtools")
devtools::install_github("IDEMSInternational/instatCalculations")
```


## What is the calculation system?

This package provides the core engine behind R-Instat’s flexible calculation framework. It allows for:

- Multi-step calculation pipelines
- Reusable and composable calculations
- Integration with metadata, grouping, and filters
- Support for linked datasets and summary workflows, which in turn encourages working with multilevel data.

Each calculation is represented by an instat_calculation object, with types such as:

| Type         | Equivalent Function | Purpose                                |
|--------------|---------------------|----------------------------------------|
| `"calculation"` | `mutate()`           | Create new columns                      |
| `"filter"`     | `filter()`           | Select rows                             |
| `"summary"`    | `summarise()`        | Create summaries                        |
| `"by"`         | `group_by()`         | Group before summarising                |
| `"sort"`       | `arrange()`          | Sort rows                               |
| `"combination"`| *(meta-type)*        | Bundle multiple steps together          |


## Learn More

A full tutorial is available as a vignette: [Understanding the R-Instat Calculation System](https://github.com/IDEMSInternational/instatCalculations/blob/main/vignettes/inst/instat_calculation.pdf)

Or view it within R after installing the package with vignettes:

```r
# Build with vignettes
devtools::install(build_vignettes = TRUE)

# View available vignettes
browseVignettes(package = "instatCalculations")
```

## Contributing

We welcome contributions to improve this package! To contribute:
  
1. Fork the repository.
2. Create a new branch for your feature or bug fix.
3. Submit a pull request with a clear description of your changes.

## License

This project is licensed under the GNU LGPL v3.0 License. See the LICENSE file for details.

## About

This package is developed and maintained by [IDEMS International](https://idems.international/) as part of the [R-Instat](https://github.com/IDEMSInternational/R-Instat) project.

---
  
  If you have any questions or issues, feel free to open an issue on the repository or contact us directly.